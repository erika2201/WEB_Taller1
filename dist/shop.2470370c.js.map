{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SCAAC,EAAAD,EAAA,SDIA,MAAME,EAAiBC,SAASC,eAAe,YACzCC,EAAiBF,SAASC,eAAe,YACzCE,EAAcH,SAASC,eAAe,SAE5C,IAAIG,EAAW,GAcf,SAASC,EAAeC,GACpB,MAAMC,EAAUP,SAASQ,cAAc,KACvCD,EAAQE,UAAY,UAEpBF,EAAQG,aAAa,OAAQ,qBAAqBJ,EAAKK,MAEvD,MAAMC,EAAaN,EAAKO,MAAQP,EAAKO,MAAO,GAAK,8EElBrD,IAAwBC,EFoBpBP,EAAQQ,UAAY,oBAQpBH,+FAGKN,EAAQU,6DACOV,EAAAW,mDEhCAH,EFiCeR,EAAAQ,MEhC5B,IAAII,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAOT,qBF+BVf,EACIyB,YAAmBjB,YAGnBkB,IAGJ,MAAGC,EAAaxB,EACOyB,MAAmDC,EAAAzB,EAAAwB,MAG1E,IAAGE,EAAmB,GACoDA,EAAA,KAAAH,EAAAtB,EAAA0B,QAAAvB,GAAAA,EAAAU,WAAAS,IAIlDtB,EACpB,QAAAwB,IAAAC,EAAeA,EAASE,MAAA,CAAAC,EAAAC,IAAAD,EAAAlB,MAAAmB,EAAAnB,SAE/B,SAAAc,IAAAC,EAAAA,EAAAE,MAAA,CAAAC,EAAAC,IAAAA,EAAAnB,MAAAkB,EAAAlB,SAGDf,EAAegB,UAAgB,GAC3Bc,EAAAK,SAAA3B,IACDF,EAAAE,QAKA4B,iBAAA,UAAAC,IAGHX,+CApEAY,iBACI,MAAMC,QCRVD,eAA2BE,GACvB,MAAMC,EAAgB1C,EAAA2C,WAAWF,EAAG,YACpC,IACI,MANRG,KAMgBA,SAAe5C,EAAA6C,QAAQH,GAO3B,OANaE,EAAKE,KAAKC,IACjB,IACCA,EAAIC,OACPnC,GAAIkC,EAAIlC,OAIlB,MAAOoC,GACLC,QAAQC,IAAIF,IDJcG,CAAYtD,EAAA2C,IAC1CxC,EAAegB,UAAY,GAC3BuB,EAAiBJ,SAAQ3B,IACrBF,EAAeE,MAGnBH,EAAWkC","sources":["src/scripts/shop.js","src/functions/products.js","src/utils/index.js"],"sourcesContent":["import {db} from \"./app\"; \r\nimport { getProducts } from \"../functions/products\"; \r\nimport { currencyFormat } from \"../utils\";\r\n\r\nconst productSection = document.getElementById(\"products\");\r\nconst categoryFilter = document.getElementById(\"category\");\r\nconst orderFilter = document.getElementById(\"order\");\r\n\r\nlet products = [];\r\n\r\nasync function loadProducts(){\r\n    const firebaseProducts =await getProducts(db);\r\n    productSection.innerHTML = \"\";\r\n    firebaseProducts.forEach(product =>{\r\n        renderProducts(product);\r\n    });\r\n\r\n    products = firebaseProducts;\r\n}\r\n\r\n\r\n//Draw products from database\r\nfunction renderProducts(item){\r\n    const product = document.createElement(\"a\");\r\n    product.className = \"product\";\r\n\r\n    product.setAttribute(\"href\", `./product.html?id=${item.id}`);\r\n\r\n    const coverImage = item.image ? item.image [0] : \"https://cdn1.iconfinder.com/data/icons/business-company-1/500/image-512.png\";\r\n\r\n    product.innerHTML = ` \r\n    <img src=\"${coverImage}\" class=\"product__img\">\r\n    <div class=\"product__info\">\r\n        <p class=\"product__name\">${item.name}</p>\r\n        <p class=\"product__category\">Categoria: ${item.category}</p>\r\n        <p class=\"product__price\">${currencyFormat(item.price)}</p>\r\n    </div>`;\r\n\r\n    productSection.appendChild(product);\r\n}\r\n\r\nfunction filterBy (){\r\n    const newCategory = categoryFilter.value;\r\n    const newOrder = orderFilter.value;\r\n    let filteredProducts = [];\r\n\r\n    if(newCategory !== \"\"){\r\n        filteredProducts = products.filter((product) => product.category === newCategory);\r\n    \r\n    } else {\r\n        filteredProducts = products;\r\n    }\r\n\r\n    if(newOrder === \"asc\"){\r\n        filteredProducts = filteredProducts.sort((a, b) => a.price - b.price);\r\n    }\r\n\r\n    if(newOrder === \"desc\"){\r\n        filteredProducts = filteredProducts.sort((a, b) => b.price - a.price);\r\n    }\r\n\r\n    productSection.innerHTML = \"\";\r\n    filteredProducts.forEach(product =>{\r\n        renderProducts(product);\r\n    });\r\n}\r\n\r\n//Filter\r\ncategoryFilter.addEventListener(\"change\", e =>{\r\n    filterBy();\r\n});\r\n\r\n//Order\r\norderFilter.addEventListener(\"change\", e =>{\r\n    filterBy();\r\n});\r\n\r\n\r\nloadProducts();","import { collection, getDocs } from \"firebase/firestore\";\r\n\r\n\r\nasync function getProducts(db){\r\n    const collectionref = collection(db,\"products\");\r\n    try {\r\n        const { docs } = await getDocs(collectionref);\r\n        const products = docs.map((doc) =>{\r\n            return{\r\n                ...doc.data(),\r\n                id: doc.id,\r\n            };\r\n        });    \r\n            return products;\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nexport{\r\n    getProducts,\r\n}","async function addProductToCart(cart){\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n};\r\n\r\nfunction getMyLocalCart(){\r\n    const myCart = localStorage.getItem(\"cart\");\r\n    return myCart ? JSON.parse(myCart) : [];\r\n}\r\n\r\n//Change to money format\r\nfunction currencyFormat(price) {\r\n    return new Intl.NumberFormat(\"es-CO\", {\r\n        style: 'currency',\r\n        currency: 'COP',\r\n        minimumFractionDigits: 0\r\n    }).format(price);\r\n}\r\n\r\n\r\nexport {\r\n    addProductToCart,\r\n    getMyLocalCart,\r\n    currencyFormat\r\n}\r\n"],"names":["$li1Mx","parcelRequire","$etBjH","$a9cddcee321f50ec$var$productSection","document","getElementById","$a9cddcee321f50ec$var$categoryFilter","$a9cddcee321f50ec$var$orderFilter","$a9cddcee321f50ec$var$products","$a9cddcee321f50ec$var$renderProducts","item","product","createElement","className","setAttribute","id","coverImage","image","price","innerHTML","name","category","Intl","NumberFormat","style","currency","minimumFractionDigits","format","appendChild","$a9cddcee321f50ec$var$filterBy","newCategory","value","newOrder","filteredProducts","filter","sort","a","b","forEach","addEventListener","e","async","firebaseProducts","db","collectionref","collection","docs","getDocs","map","doc","data","error","console","log","$0218f50cb6a65388$export$68a801b7b3c0bfaa"],"version":3,"file":"shop.2470370c.js.map"}