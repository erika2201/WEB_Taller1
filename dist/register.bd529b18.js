var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=e.parcelRequire2c23;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var a=o[e];delete o[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},e.parcelRequire2c23=a);var n=a("li1Mx"),l=a("1tHc5"),s=a("etBjH");l=a("1tHc5");l=a("1tHc5"),n=a("li1Mx"),s=a("etBjH");async function r(e){const t=s.doc(n.db,"users",e);try{const e=await s.getDoc(t);return e.data()}catch(e){console.log(e)}}l=a("1tHc5");const i=document.getElementById("registerUserForm"),c=document.getElementById("loginUserForm"),d=(document.getElementById("profileIcon"),document.getElementById("loginDiv")),u=document.getElementById("logoutDiv"),m=document.getElementById("logoutLink");null!=i&&i.addEventListener("submit",(async e=>{e.preventDefault();const t={name:i.name.value,lastname:i.lastname.value,email:i.email.value,password:i.password.value,isAdmin:!1};console.log("Usuario registrado");const o=await async function(e,{email:t,password:o}){try{const{user:a}=await l.createUserWithEmailAndPassword(e,t,o);return a}catch(e){"auth/weak-password"===e.code&&alert("Tu contrase침a debe tener al menos 6 caracteres"),"auth/missing-email"===e.code&&alert("Te falta ingresar un correo"),"auth/email-already-in-use"===e.code&&alert("Este correo ya est치 registrado"),console.log(e.code)}}(n.auth,t);await async function(e,t,o){try{await s.setDoc(s.doc(e,"users",t),o)}catch(e){console.log(e)}}(n.db,o.uid,t),l.onAuthStateChanged(n.auth,(async e=>{if(e){const t=e.uid;let o=[];o=await r(t),o.isAdmin?location.href="./createProduct.html":location.href="./index.html"}}))})),null!=c&&c.addEventListener("submit",(e=>{e.preventDefault();const t=c.email.value,o=c.password.value;!async function(e,t,o){try{const{user:a}=await l.signInWithEmailAndPassword(e,t,o);console.log(a)}catch(e){alert("Usuario o contrase침a inv치lido")}}(n.auth,t,o),console.log("Entraste"),l.onAuthStateChanged(n.auth,(async e=>{if(e){const t=e.uid;let o=[];o=await r(t),o.isAdmin?location.href="./createProduct.html":location.href="./index.html"}}))})),m.addEventListener("click",(e=>{l.signOut(n.auth).then((()=>{location.href="./index.html",console.log("Salimos")})).catch((e=>{console.log(e)}))})),l.onAuthStateChanged(n.auth,(async e=>{e&&(userLogged=e,userLogged?(d.style.display="none",u.style.display="flex"):console.log("NO LOG"))}));
//# sourceMappingURL=register.bd529b18.js.map
