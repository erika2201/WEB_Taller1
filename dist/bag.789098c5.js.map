{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,mCCUA,SAASC,EAAeC,GACpB,OAAO,IAAIC,KAAKC,aAAa,QAAS,CAClCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,IACxBC,OAAON,GDTd,MAAMO,EAAcC,SAASC,eAAe,QACtCC,EAAeF,SAASC,eAAe,SAC7C,IAAIE,EAAO,GAEX,SAASC,EAASC,GACd,IAAIC,EAAQ,EACZD,EAAKE,SAAQC,KAyBjB,SAAuBA,GACnB,MAAMC,EAAcT,SAASU,cAAc,MAC3CD,EAAYE,UAAY,eACxBF,EAAYG,UAAY,kEAazBJ,EAAAK,MAAA,8DAM6BL,EAASM,sDAE7BvB,EAA0BiB,EAAAhB,uKAMtCO,EAAAgB,YAAAN,GAIQA,EAAAO,iBAAa,SAAAC,IAEb,WAAAA,EAAAC,OAAAC,UAGJC,QAAAC,IAAA,UAvDJC,eAA6BC,GAEzB,MAAMC,EAAUrB,EAAKsB,QAAOjB,GACxBA,EAAQkB,KAAOH,IAEfpB,EAAOqB,EAEJG,kBACOC,EAAAC,mBAAmBxC,EAAAyC,GAAIH,WAAWI,IAAKP,IC7BzDF,eAAgCjB,GAC5B2B,aAAaC,QAAQ,OAAQC,KAAKC,UAAU9B,KD+BxC+B,CAAiBZ,GACjBzB,EAAYa,UAAY,GACxBR,EAASoB,GA2Cda,CAAA7B,EAAAkB,QAhEKY,CAAc9B,GACdF,GAASiC,SAAS/B,EAAQhB,UAE9BU,EAAaU,UAAYrB,EAAee,GACxCc,QAAQC,IAAI9B,EAAee,4HCb/B,WACI,MAAMkC,EAASR,aAAaS,QAAQ,QACpC,OAAOD,EAASN,KAAKQ,MAAMF,GAAU","sources":["src/scripts/car.js","src/utils/index.js"],"sourcesContent":["import { auth, db } from \"./app\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { getFirebaseCart, createFirebaseCart } from \"../functions/cart\";\r\nimport { getMyLocalCart, currencyFormat } from \"../utils/index\";\r\nimport { addProductToCart } from \"../utils\";\r\n\r\nconst cartSection = document.getElementById(\"cart\");\r\nconst totalSection = document.getElementById(\"total\");\r\nlet cart = [];\r\n\r\nfunction loadCart(cart){\r\n    let total = 0;\r\n    cart.forEach(product =>{\r\n        renderProduct(product);\r\n        total += parseInt(product.price);\r\n    });\r\n    totalSection.innerHTML = currencyFormat(total);\r\n    console.log(currencyFormat(total));\r\n};\r\n\r\n\r\nasync function removeProduct(productId){\r\n    //Cretae Array without a deleted product\r\n    const newCart = cart.filter(product => \r\n        product.id !== productId);\r\n\r\n        cart = newCart;\r\n\r\n        if(userLogged){\r\n            await createFirebaseCart(db, userLogged.uid, newCart);\r\n        }\r\n\r\n        addProductToCart(newCart);\r\n        cartSection.innerHTML = \"\";\r\n        loadCart(newCart);\r\n}\r\n\r\nfunction renderProduct(product) {\r\n    const productCart = document.createElement(\"li\");\r\n    productCart.className = \"product flex\";\r\n    productCart.innerHTML = `\r\n    <div class=\"product__imgAndName flex\">\r\n        <img src=${product.image[0]} class=\"product__img\">\r\n        <p class=\"product__name\">${product.name}</p>\r\n    </div>\r\n    <p class=\"product_price\">${currencyFormat(product.price)}</p>\r\n    <div class=\"product__cantAndDelete\">\r\n        <button class=\"product__delete\">Eliminar</button>\r\n    </div>\r\n    <p class=\"product__total\">Total</p>`\r\n\r\n    cartSection.appendChild(productCart);\r\n    \r\n   /*  const productDelete = document.querySelector(\".product__delete\");\r\n        productDelete.addEventListener(\"click\", async (e) =>{\r\n            console.log(\"remove\");\r\n        }); */\r\n\r\n    productCart.addEventListener(\"click\", e =>{\r\n        if(e.target.tagName === \"BUTTON\"){\r\n            console.log(\"remove\");\r\n            removeProduct(product.id);\r\n        }\r\n    });    \r\n};\r\n\r\n//Know if there is a userlogged\r\nonAuthStateChanged(auth, async (user) =>{\r\n    if(user){\r\n        userLogged = user;\r\n        console.log(user);\r\n        cart = await getFirebaseCart(db, userLogged.uid);\r\n    } else {\r\n        cart = getMyLocalCart();\r\n    }\r\n\r\n    loadCart(cart);\r\n});","async function addProductToCart(cart){\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n};\r\n\r\nfunction getMyLocalCart(){\r\n    const myCart = localStorage.getItem(\"cart\");\r\n    return myCart ? JSON.parse(myCart) : [];\r\n}\r\n\r\n//Change to money format\r\nfunction currencyFormat(price) {\r\n    return new Intl.NumberFormat(\"es-CO\", {\r\n        style: 'currency',\r\n        currency: 'COP',\r\n        minimumFractionDigits: 0\r\n    }).format(price);\r\n}\r\n\r\n\r\nexport {\r\n    addProductToCart,\r\n    getMyLocalCart,\r\n    currencyFormat\r\n}\r\n"],"names":["$li1Mx","parcelRequire","$1eef38cfda4b0c52$export$4670d0ed237a9270","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","$3e8705caa092dbaf$var$cartSection","document","getElementById","$3e8705caa092dbaf$var$totalSection","$3e8705caa092dbaf$var$cart","$3e8705caa092dbaf$var$loadCart","cart","total","forEach","product","productCart","createElement","className","innerHTML","image","name","appendChild","addEventListener","e","target","tagName","console","log","async","productId","newCart","filter","id","userLogged","$6naOk","createFirebaseCart","db","uid","localStorage","setItem","JSON","stringify","$1eef38cfda4b0c52$export$1bdbccb25be1b1c","$3e8705caa092dbaf$var$removeProduct","$3e8705caa092dbaf$var$renderProduct","parseInt","myCart","getItem","parse"],"version":3,"file":"bag.789098c5.js.map"}