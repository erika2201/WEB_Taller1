{"mappings":"oeACA,IAAAA,EAAAC,EAAA,SCDAC,EAAAD,EAAA,sBAkBAE,eAAeC,EAAaC,EAASC,EAAS,IAO1C,OANuBA,EAAOC,KAAKJ,MAAOK,IACtC,MAAMC,QAPdN,eAAoCE,EAASG,GACzC,MAAME,EAAaC,EAAAC,IAAIP,EAAS,mBAAmBG,EAAMK,QACzD,aAAaF,EAAAG,YAAYJ,EAAYF,GAKJO,CAAqBV,EAASG,GAE3D,OAAOG,EAAAK,eAAeL,EAAAC,IAAIP,EAASI,EAAeG,IAAIK,cDjB9D,MAAMC,EAAoBC,SAASC,eAAe,qBAElDF,EAAkBG,iBAAiB,UAAUlB,MAAOmB,IAChDA,EAAEC,iBACFC,QAAQC,IAAI,2BAEZ,MAAMjB,EAAQU,EAAkBV,MAAMkB,MAChCb,EAAOK,EAAkBL,KAAKc,MAC9BC,EAAcV,EAAkBU,YAAYD,MAC5CE,EAAQX,EAAkBW,MAAMF,MAChCG,EAAWZ,EAAkBY,SAASH,MAE5C,IAAII,EAAU,GAEd,GAAGvB,EAAMwB,OAAO,CACZ,MAAMC,QAAuB7B,EAAaJ,EAAAK,QAAS,IAAIG,IAEvDuB,QAAgBG,QAAQC,IAAIF,GAGhC,MAAMG,EAAa,CACf5B,MAAOuB,OACPlB,cACAe,QACAC,WACAC,SC3BR3B,eAA0BkC,EAAIC,GAC1B,UACUpC,EAAAqC,OAAQrC,EAAAsC,WAAYH,EAAI,YAAaC,GAC3Cd,QAAQC,IAAI,oBACZgB,MAAM,YAAcH,EAAQzB,KAAO,YACrC,MAAO6B,GACLlB,QAAQC,IAAIiB,IDyBVC,CAAW3C,EAAAqC,GAAID","sources":["src/scripts/createProduct.js","src/functions/addproducts.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { storage, db } from \"./app\";\r\nimport { addProduct, uploadImages } from \"../functions/addproducts\";\r\n\r\n\r\nconst createproductForm = document.getElementById(\"createProductForm\");\r\n\r\ncreateproductForm.addEventListener(\"submit\", async (e) =>{\r\n    e.preventDefault();\r\n    console.log(\"Create a new product!!!\");\r\n\r\n    const image = createproductForm.image.files;\r\n    const name = createproductForm.name.value;\r\n    const description = createproductForm.description.value;\r\n    const price = createproductForm.price.value;\r\n    const category = createproductForm.category.value;\r\n    \r\n    let gallery = [];\r\n\r\n    if(image.length){\r\n        const uploadedImages = await uploadImages(storage, [...image]);\r\n\r\n        gallery = await Promise.all(uploadedImages);\r\n    }\r\n\r\n    const newProduct = {\r\n        image: gallery,\r\n        name,\r\n        description,\r\n        price,\r\n        category\r\n    };\r\n\r\n    //Add to database\r\n    await addProduct(db, newProduct);\r\n});","import { addDoc, collection } from \"firebase/firestore\";\r\nimport { ref, uploadBytes, getDownloadURL} from \"firebase/storage\";\r\n\r\nasync function addProduct(db, product) {\r\n    try {\r\n        await addDoc (collection (db, \"products\"), product);\r\n        console.log(\"Product added!!!\");\r\n        alert(\"Producto \" + product.name + \" aÃ±adido\");\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nasync function imageUploadReference(storage, image) {\r\n    const storageRef = ref(storage, `products/images/${image.name}`);\r\n    return await uploadBytes(storageRef, image);\r\n}\r\n\r\nasync function uploadImages(storage, images = []) {\r\n    const uploadedImages = images.map( async (image) => {\r\n        const imageReference = await imageUploadReference(storage, image);\r\n\r\n        return getDownloadURL(ref(storage, imageReference.ref.fullPath));\r\n    });\r\n\r\n    return uploadedImages;\r\n\r\n}\r\n\r\nexport {\r\n    addProduct,\r\n    uploadImages\r\n}"],"names":["$li1Mx","parcelRequire","$etBjH","async","$ff011c0a69b2e1e8$export$633f5b6169e2b910","storage","images","map","image","imageReference","storageRef","$aYguL","ref","name","uploadBytes","$ff011c0a69b2e1e8$var$imageUploadReference","getDownloadURL","fullPath","$429397c78ea7114e$var$createproductForm","document","getElementById","addEventListener","e","preventDefault","console","log","files","value","description","price","category","gallery","length","uploadedImages","Promise","all","newProduct","db","product","addDoc","collection","alert","error","$ff011c0a69b2e1e8$export$7caf006d7b64ee15"],"version":3,"file":"createProduct.653edfc1.js.map"}